<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.douzone.doki.repository.MemoRepository">
	<update id="changeColor">
		<![CDATA[
			update memo set color = "444" where no = 1;
		]]>
	</update>
	
	<insert id="addMemo">
		<![CDATA[
			insert into memo values(null, "테스트15", "black", now(), "0", "0", #{userNo}, #{departmentNo})
		]]>
	</insert>
	
	<insert id="addHash">
		<![CDATA[
			insert into hash values(null, #{hashName})
		]]>
	</insert>
	
	<insert id="addMemoHash">
		<![CDATA[
			insert into memo_hash values(#{memoNo}, #{hashNo})
		]]>
	</insert>
	
	<select id="getListByGroup" resultType="memovo">
		<![CDATA[
			select 	m.no as no, m.contents as contents, m.color as color, m.reg_date as regDate, m.pin as pin,
					m.important as important, m.user_no as userNo, m.department_no as departmentNo, h.name as hashName,
					ma.time as memoAlarmTime, ma.repetition as repetition
				from memo m 
					left outer join memo_alarm ma on m.no = ma.memo_no 
					left outer join memo_hash mh on m.no = mh.memo_no
					left outer join hash h on h.no = mh.hash_no
				where m.department_no = #{ groupNo };
		]]>
	</select>
</mapper>